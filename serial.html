<!DOCTYPE HTML>
<html lang="en" xmlns:dc="http://www.w3.org/1999/xhtml">
<head>
    <title>Recommand Color</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入 Bootstrap -->
    <link href="style/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!--  引入预定义CSS动态效果  -->
    <link href="style/animate.css" rel="stylesheet"/>
    <!-- 引入自定义main -->
    <link href="style/main.css" rel="stylesheet"/>
    <!-- 临时引入的css文件 -->
    <link rel="stylesheet" type="text/css" href="style/serial/normalize.css"/>
    <!--<link rel="stylesheet" type="text/css" href="style/serial/demo.css"/>-->
    <link rel="stylesheet" type="text/css" href="style/serial.css"/>
    <script src="script/jquery-3.2.1.min.js"></script>
    <script src="script/vue.min.js"></script>

</head>
<body>
<header class="recommend">
    <nav id="nav" class="fixed">
        <span>
            <svg id="logo" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path
                    d="M24 6C14.06 6 6 14.06 6 24s8.06 18 18 18c1.66 0 3-1.34 3-3 0-.78-.29-1.48-.78-2.01-.47-.53-.75-1.22-.75-1.99 0-1.66 1.34-3 3-3H32c5.52 0 10-4.48 10-10 0-8.84-8.06-16-18-16zM13 24c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6-8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm10 0c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></svg>
        </span>
        <ul class="row">
            <li class="underline li1">
                <a href="index.html">自选配色</a>
            </li>
            <li class="underline li2">
                <a href="recommend-color.html">推荐配色</a>
            </li>
            <li class="underline li3">
                <a href="serial.html">系列配色</a>
            </li>
            <li class="underline li4">
                <a href="about-color.html">了解配色</a>
            </li>
        </ul>
        <div class="header-user-entrance" hidden>
            <a data-toggle="modal" data-target="#loginModal">
                <span class="glyphicon glyphicon-user"></span>登陆
            </a>
            <span>|</span>
            <a data-toggle="modal" data-target="#registerModal">
                <span class="glyphicon glyphicon-log-in"></span>注册
            </a>
        </div>
        <div class="header-user-entrance after-login">
        <span class="user-profile">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path
                    d="M24 24c4.42 0 8-3.59 8-8 0-4.42-3.58-8-8-8s-8 3.58-8 8c0 4.41 3.58 8 8 8zm0 4c-5.33 0-16 2.67-16 8v4h32v-4c0-5.33-10.67-8-16-8z"></path></svg>
        </span>
            <span class="user-name">
        </span>
            <span class="glyphicon glyphicon-log-out log-out"></span>
            <svg data-toggle="modal" data-target="#uploadModal" class="upload-btn" xmlns="http://www.w3.org/2000/svg"
                 width="48" height="48" viewBox="0 0 48 48">
                <path d="M18 32h12V20h8L24 6 10 20h8zm-8 4h28v4H10z"></path>
            </svg>
        </div>
    </nav>
</header>
<div class="grid-wrap">
    <ul class="grid swipe-right" id="grid">
        <li v-for="img in images">
            <a>
                <img v-bind:src="img.imageurl" alt="img01">
                <section>
                    <ul class="pic-color-list">
                        <template v-for="color in img.colors">
                            <li v-bind:style="{backgroundColor: color}"></li>
                        </template>
                        <!--<li></li>-->
                        <!--<li></li>-->
                        <!--<li></li>-->
                        <!--<li></li>-->
                        <!--<li></li>-->
                    </ul>
                </section>
            </a>
        </li>
    </ul>
</div>

<!-- BEGIN: modal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-logo">
                    <svg id="logo" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                        <path d="M24 6C14.06 6 6 14.06 6 24s8.06 18 18 18c1.66 0 3-1.34 3-3 0-.78-.29-1.48-.78-2.01-.47-.53-.75-1.22-.75-1.99 0-1.66 1.34-3 3-3H32c5.52 0 10-4.48 10-10 0-8.84-8.06-16-18-16zM13 24c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6-8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm10 0c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path>
                    </svg>
                    <span>C-color</span>
                </div>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <span class="glyphicon glyphicon-user input-group-addon"></span>
                    <input type="text" class="form-control" name="login-name" id="login-name" placeholder="用户名"/>
                </div>
                <div class="input-group">
                    <span class="glyphicon glyphicon-pencil input-group-addon"></span>
                    <input type="password" class="form-control" name="login-pwd" id="login-pwd" placeholder="您的密码"/>
                </div>
                <div class="error-message login" hidden></div>
            </div>
            <div class="modal-footer">
                <div class="modal-btn-footer" id="login_btn">登陆</div>
            </div>
        </div><!-- END: /.modal-content -->
    </div><!-- END:  login-modal -->
</div>

<div class="modal fade" id="registerModal" tabindex="-2" role="dialog" aria-labelledby="registerLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-logo">
                    <svg id="logo" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                        <path d="M24 6C14.06 6 6 14.06 6 24s8.06 18 18 18c1.66 0 3-1.34 3-3 0-.78-.29-1.48-.78-2.01-.47-.53-.75-1.22-.75-1.99 0-1.66 1.34-3 3-3H32c5.52 0 10-4.48 10-10 0-8.84-8.06-16-18-16zM13 24c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6-8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm10 0c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path>
                    </svg>
                    <span>C-color</span>
                </div>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <span class="glyphicon glyphicon-user input-group-addon"></span>
                    <input type="text" class="form-control" name="register-name" id="register-name" placeholder="用户名"/>
                </div>
                <div class="input-group">
                    <span class="glyphicon glyphicon-pencil input-group-addon"></span>
                    <input type="password" class="form-control" name="register-pwd" id="register-pwd"
                           placeholder="您的密码"/>
                </div>
                <div class="input-group">
                    <span class="glyphicon glyphicon-ok input-group-addon"></span>
                    <input type="password" class="form-control" name="registser-re-pwd" id="register-re-pwd"
                           placeholder="请确认您的密码"/>
                </div>
                <div class="error-message register" hidden></div>
            </div>
            <div class="modal-footer">
                <div class="modal-btn-footer" id="register_btn">注册</div>
            </div>
        </div><!-- END: modal-content -->
    </div>
</div><!-- END: register modal -->

<!-- BEGIN: upload -->
<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-logo">
                    <svg id="logo" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                        <path d="M24 6C14.06 6 6 14.06 6 24s8.06 18 18 18c1.66 0 3-1.34 3-3 0-.78-.29-1.48-.78-2.01-.47-.53-.75-1.22-.75-1.99 0-1.66 1.34-3 3-3H32c5.52 0 10-4.48 10-10 0-8.84-8.06-16-18-16zM13 24c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6-8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm10 0c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm6 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path>
                    </svg>
                    <span>C-color</span>
                </div>
            </div>
            <div class="modal-body">
                <div id="imgContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                        <path d="M18 32h12V20h8L24 6 10 20h8zm-8 4h28v4H10z"></path>
                    </svg>
                    <span>把图片拖放到这里</span>
                </div>
                <div class="recognize-color">
                    <ul>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-btn-footer" id="recognize_btn">识别</div>
                <div class="modal-btn-footer" id="upload_btn" hidden>上传</div>
            </div>
        </div><!-- END: /.modal-content -->
    </div><!-- END:  login-modal -->
</div>
<!-- END: modal -->


<!-- 引入客户端检测脚本 -->
<script src="script/serial/modernizr.custom.js"></script>
<!-- 引入jQuery -->
<script src="script/jquery-3.2.1.min.js"></script>
<!-- 引入bootstrap插件 -->
<script src="style/bootstrap-3.3.7/js/bootstrap.min.js"></script>
<!-- 引入color.js -->
<script src="script/color.js"></script>
<!-- 引入rgbaster.js -->
<script src="script/rgbaster.min.js"></script>
<!-- 引入main.js -->
<script src="script/main.js"></script>

<!-- for the serial page -->
<script src="script/serial/masonry.pkgd.min.js"></script>
<script src="script/serial/imagesloaded.pkgd.min.js"></script>
<script src="script/serial/classie.js"></script>
<script src="script/serial/colorfinder-1.1.js"></script>
<script src="script/serial/gridScrollFx.js"></script>


<script>
    $.ajax({
        'url': 'http://localhost:3000/getPic',
        'method': 'post',
        'data': {
            userid: 1
        },
        'success': function (data) {
            var img_obj = JSON.parse(data);
            for(var i = 0; i < img_obj.length; ++ i){
                img_obj[i].colors = JSON.parse(img_obj[i].colors);
            }
            var vueImg = new Vue({
                el: '#grid',
                data: {
                    images: img_obj
                }
            });
            new GridScrollFx(document.getElementById('grid'), {
                viewportFactor: 0.4
            });
        }
    });
</script>

<script>
    $("#login_btn").click(function () {
        var name = $("input#login-name").val();
        var pass = $("input#login-pwd").val();
        login(name, pass);
    });
    $("#register_btn").click(function () {
        var name = $("#register-name").val();
        var password = $("#register-pwd").val();
        var repass = $("#register-re-pwd").val();
        if (name && password && password === repass) {
            $.ajax({
                'url': 'http://localhost:3000/register',
                'method': 'POST',
                'data': {
                    username: name,
                    password: password,
                    repassword: repass
                },
                'success': function (data) {
                    login(name, password);
                    $("#registerModal").modal('hide');
                }
            })
        }
    });
</script>
</body>
</html>